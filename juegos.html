<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Hay que modificar el proyecto para conseguir que tenga un titulo precioso -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Comunidad de Juegos de Mesa</title>
  <style>
    body {
      font-family:'Dancing Script cursive';
      background: #fdfdfd;
      background-image: url("./juegos-de-mesa-en-familia-1140x855.jpg");
      margin: 20;
      padding: 50px;
      color: #333;
      font-size: 1.4em;
      font-weight: bold;
      background-repeat: round;
      padding-bottom: 100px; /* Este es el nuevo margen inferior */
    }
    h2 {
      text-align: center;
    }

    header {
      background: #9e437b;
      color: white;
      padding: 1em;
      text-align: center;
      border-radius: 20px;
    }

    section {
      margin-top: 20px;
    }

    .game-list {
      margin-top: 20px;
      padding-left: 20px;
    }

    /* Centrar toda la seccion de sugerencias */
  .suggestions {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

    input, button {
      padding: 8px;
      margin: 5px 0;
    }
    input {
      -moz-border-radius: 10px;
      -webkit-border-radius: 10px;
      border-radius: 10px;
      border: 1.5px solid #e9a81b67;
    }
  /* Centrar el formulario y sus elementos */
  .suggestions form {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }

  /* Ajuste opcional para que el input y botÃ³n tengan mismo ancho visual */
  .suggestions input,
  .suggestions button {
    width: auto; /* o usa un valor fijo como 250px si prefieres */
  }

    .suggested-game {
      background: #e8f5e9;
      padding: 20px;
      margin: 20px 0;
      border-left: 20px solid #4caf50;
      border-radius: 20px;
    }

/* Centrar el contenido del minijuego */
#wordGame {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

/* Para centrar cada fila de letras */
#attempts {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  margin-top: 20px;
}
    #attempts {
      margin-top: 20px;
    }

.attempt-row {
  display: flex;
  gap: 20px; /* Un poco mÃ¡s de espacio entre cajas */
  margin-bottom: 20px;
}

.letter-box {
  width: 100px;
  height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 20px solid #aaa; /* Puedes dejarlo igual o reforzar un poco el borde */
  font-size: 50px;         /* Ajuste opcional del tamaÃ±o de letra */
  font-weight: bold;
}

    .correct-position {
      background-color: #6aaa64;
      color: white;
    }

    .correct-letter {
      background-color: #c9b458;
      color: white;
    }

    .wrong-letter {
      background-color: #787c7e;
      color: white;
    }

.boton {
      position: absolute;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }

    #jugar-btn {
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      transition: top 0.3s ease, left 0.3s ease;
      background-color: #869e43;
    }
    
    .movil {
      position: absolute;
    }
    
  </style>
</head>
<body>
  <header>
    <h1>Comunidad de Juegos de Mesa de Manu</h1>
  </header>

  <section>
    <h2>Â¿QuÃ© son los juegos de mesa?</h2>
    <p>Los juegos de mesa son una excelente forma de compartir, divertirse y aprender. Â¡Ãšnete a nuestra comunidad para descubrir nuevos tÃ­tulos y jugar juntos!</p>
  </section>

  <section>
    <h2>Las recomendaciones de Manu para hoy:</h2>
      <!-- <ul class="game-list">
        <li>Catan</li>
        <li>Ciudadelas</li>
        <li>Terraforming Mars</li>
        <li>Magic the gathering</li>
        <li>ParchÃ­s</li>
        <li>Descent</li>
        <li>Carcassonne</li>
        <li>Dixit</li>
        <li>Ticket to Ride</li> -->
        <ul id="selectedGames"> </li>
      <!-- </ul> -->
  </section>
 <section class="suggestions">
  <h2>Sugiere un nuevo juego:</h2>
  <form id="suggestForm">
    <input type="text" id="gameInput" placeholder="Nombre del juego" required />
    <button type="submit">Agregar</button>
  </form>
  <div id="suggestedGames"></div> <!-- AquÃ­ aparecerÃ¡n las sugerencias -->
</section>

  <!-- Nuevo: Minijuego -->
  <section id="wordGame">
    <h2>Adivina la Palabra

    </h2>
    <p>Ingresa una palabra de 5 letras para adivinar.</p>
   <script>
    var gameList = ['Catan', 'Carcassonne', 'Ticket to Ride', '7 Wonders', 'Dominion', 'Risk', 'Monopoly',
     'Clue', 'Scrabble', 'Pandemic', 'Agricola', 'Terra Mystica', 'Codenames', 'Splendor', 'Azul', 'Wingspan',
     'Scythe', 'Gloomhaven', 'Arkham Horror', 'Betrayal at House on the Hill', 'The Resistance', 'Love Letter', 
     'Small World', 'Chess', 'Checkers', 'Hive', 'Tigris & Euphrates', 'Twilight Struggle', 'Everdell', 'Parks',
     'Brass: Birmingham', 'Root', 'The Crew', 'Quacks of Quedlinburg', 'Unlock!', 'Exit: The Game', 'King of Tokyo',
     'Jaipur', 'Patchwork', 'Barenpark', 'Camel Up', 'Dead of Winter', 'Spirit Island', 'Decrypto', 'Telestrations',
     'Just One', 'Dixit', 'Takenoko', 'Bang!', 'Magic: The Gathering'];
    
    function obtenerJuegosAleatorios(array, cantidad) {
      const copia = [...array];
      const resultado = [];
      for (let i = 0; i < cantidad; i++) {
        const indice = Math.floor(Math.random() * copia.length);
        resultado.push(copia.splice(indice, 1)[0]);
      }
      return resultado;
    }

    const juegosAleatorios = obtenerJuegosAleatorios(gameList, 8);

    const lista = document.getElementById('selectedGames');
    juegosAleatorios.forEach(juego => {
      const li = document.createElement('li');
      li.textContent = juego;
      lista.appendChild(li);
    });

   </script>

  <section class="suggestions">
    <h2>Â¿A que jugamos hoy?</h2>
    <form id="suggestForm">
      <input type="text" id="gameInput" placeholder="Nombre del juego" required />
      <button type="submit">Agregar</button>
    </form>
    <div id="suggestedGames"></div>
  </section>

  <!-- Nuevo: Minijuego -->
  <section id="wordGame">
    <h2>Adivina la Palabra</h2>
    <p>Ingresa una palabra para adivinar.</p>
    <form id="guessForm">
      <input type="text" id="guessInput" placeholder="Tu intento" required />
      <button type="submit">Probar</button>
    </form>
    <div id="attempts"></div>
    <div id="gameResult"></div>
  </section>

  <div id="main-menu" class="screen active">
      <div class="menu-container">
        <h1 class="game-title">JUEGO MARAVILLOSO ðŸ˜„</h1>
      </div>
      <div id="contenedor">
        <button id = "jugar-btn">Jugar</button>
      </div>
  </div>


   <script>
    const button = document.getElementById('jugar-btn');

    function moverBoton() {
      if (!button.classList.contains('movil')) {
        // Obtenemos su posiciÃ³n actual en la pantalla
        const rect = button.getBoundingClientRect();
        const scrollTop = window.scrollY;
        const scrollLeft = window.scrollX;

        // Le damos estilo absoluto con la posiciÃ³n actual
        button.style.position = 'absolute';
        button.style.top = `${rect.top + scrollTop}px`;
        button.style.left = `${rect.left + scrollLeft}px`;
        button.classList.add('movil');
      }

      // Nueva posiciÃ³n aleatoria dentro de la ventana
      const maxX = window.innerWidth - button.offsetWidth;
      const maxY = window.innerHeight - button.offsetHeight;

      const randomX = Math.random() * maxX;
      const randomY = Math.random() * maxY;

      button.style.left = `${randomX}px`;
      button.style.top = `${randomY}px`;
    }

    button.addEventListener('click', moverBoton);
  </script>


  <script>
    // --- CÃ³digo para el formulario de sugerencias ---
    const suggestForm = document.getElementById('suggestForm');
    const gameInput = document.getElementById('gameInput');
    const suggestedGames = document.getElementById('suggestedGames');

    suggestForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const gameName = gameInput.value.trim();
      if (gameName !== "") {
        const gameItem = document.createElement('div');
        gameItem.className = 'suggested-game';
        gameItem.textContent = gameName;
        suggestedGames.appendChild(gameItem);
        gameInput.value = "";
      }
    });

    // --- CÃ³digo para el minijuego de adivinar palabra ---
    const dictionary = ['manzana', 'naranja', 'plÃ¡tano', 'uvas', 'pera', 'kiwi', 'cereza', 'chirimoya'];

    const targetWord = dictionary[Math.floor(Math.random() * dictionary.length)].toLowerCase();

    const guessForm = document.getElementById('guessForm');
    const guessInput = document.getElementById('guessInput');
    const attemptsDiv = document.getElementById('attempts');
    const resultDiv = document.getElementById('gameResult');
    let attemptCount = 0;
    const maxAttempts = 6;

    guessForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const guess = guessInput.value.toLowerCase().trim();

      //TO-DO -El maximo de cadena no tiene porque ser 5 sino el numero de caracteres de la palabra elegida
      /*if (guess.length !== targetWord.length || !/^[a-z]+$/.test(guess)) {
        alert("Por favor ingresa una palabra vÃ¡lida de 5 letras.");
        return;
      }*/

      if (attemptCount >= maxAttempts) {
        resultDiv.textContent = `El juego ha terminado. La palabra era "${targetWord}".`;
        return;
      }else if (targetWord == guess){
        resultDiv.textContent = "Â¡Ganaste!";
        return;
      }

      const row = document.createElement('div');
      row.className = 'attempt-row';

      const targetArray = targetWord.split('');
      const guessArray = guess.split('');
      const usedIndices = [];

      // Primero marcar las que estÃ¡n en posiciÃ³n correcta
      guessArray.forEach((letter, i) => {
        const box = document.createElement('div');
        box.className = 'letter-box';

        if (letter === targetArray[i]) {
          box.textContent = letter.toUpperCase();
          box.classList.add('correct-position');
          usedIndices.push(i);
        } else {
          box.textContent = letter.toUpperCase();
          box.classList.add('wrong-letter'); // Temporal
          box.dataset.letter = letter;
        }

        row.appendChild(box);
      });

      // Luego revisar las que estÃ¡n en la palabra pero en posiciÃ³n incorrecta
      row.querySelectorAll('.letter-box').forEach((box, i) => {
        if (box.classList.contains('correct-position')) return;

        const letter = box.dataset.letter;
        const indexInTarget = targetArray.findIndex((char, idx) => char === letter && !usedIndices.includes(idx));

        if (indexInTarget !== -1) {
          box.classList.remove('wrong-letter');
          box.classList.add('correct-letter');
          usedIndices.push(indexInTarget);
        }
      });

      attemptsDiv.appendChild(row);
      attemptCount++;

      if (guess === targetWord) {
        resultDiv.textContent = "Â¡Felicidades! Has adivinado la palabra.";
        guessForm.style.display = 'none';
      } else if (attemptCount >= maxAttempts) {
        resultDiv.textContent = `Lo siento, has perdido. La palabra era "${targetWord}".`;
      }

      guessInput.value = "";
    });
  </script>
</body>
</html>
